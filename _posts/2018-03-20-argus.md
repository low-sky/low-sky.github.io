---
layout: post
title: Calibrating ARGUS data with pipelines
---

This is an outline of the calibration pipeline for processing ARGUS data taken with the GBT. The pipeline approach relies on two packages that I maintain:

   * `gbtpipe` ([link](https://github.com/low-sky/gbtpipe/tree/master/gbtpipe)) -- An installable version of the GBT pipeline (developed by NRAO/GBO and forked from [here](https://github.com/nrao/gbt-pipeline)). This provides useful sets of routines for calibration from the observatory library. The python module _also_ provides a gridder for on-the-fly spectroscopic data.
   * `degas` ([link](https://github.com/low-sky/degas/) -- The calibration pipeline package developed for the DEGAS survey. This actually does the calibration using the tools developed in `gbtpipe` and the strategy used for DEGAS.

The `gbtpipe` package is also used for gridding in the KEYSTONE and GAS projects. 

Data for DEGAS are collected using the VEGAS spectrometer and output into uncalibrated SDFITS files using the GBT filler.  Data are recorded in spectrometer counts with necessary pointing, tuning and weather metadata tagged to each scan of the file.  A typical observation consists of a VANE/SKY calibration, following by scanning the array across the source repeatedly, and another VANE/SKY calibration.  All calibration is performed on a per-feed basis.

Given these raw data, the `degas` package process the VANE/SKY calibration scans to establish the system temperature scale of the observations.  This is accomplished through the `gettsys` routine, which identifies VANE/SKY scans from metadata and performs error checking. 

Individual scan calibration runs through the `calscans` routine, which accepts session scan numbers and VANE/SKY calibration scan numbers and loops over each set of scans to calibrate onto the $T_A$ or $T_A^*$ scale. Each individual scan is processed using ON/OFF calibration.  In the DEGAS observing strategy, there are no dedicated OFF positions and signal from an individual scan is typically weak. These conditions allow for two strategies: to use the first and last 25% of the scan data for establishing the OFF power.  The OFF power at each channel is estimated by fitting a linear relationship on a per channel basis of OFF power vs time.  This regression provides a model of the bandpass per channel over the course of the scan. Alternatively, users can construct a time-constant bandpass as a median over scan data as a function of time.

$T_A = T_{\mathrm{sys}} \frac{\mbox{ON}(t,\nu)-\mbox{OFF}(t,\nu)}{\mbox{OFF}(t,\nu)}$

